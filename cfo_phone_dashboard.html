<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CFO ChancePlan.ai Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="cfo_phone_dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="bg-pattern"></div>
    
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <img src="logo.png" alt="Company Logo" style="height: 60px; width: auto;">
            </div>

            <!-- Viewport Display
            <div id="viewportDisplay" style="position: absolute; top: 5px; left: 50%; transform: translateX(-50%); background: rgba(239, 68, 68, 0.9); color: white; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-family: 'Space Mono', monospace; z-index: 1000;"></div> -->

            <!-- Settings Menu -->
            <div class="settings-menu-wrapper">
                <button class="settings-btn" id="settingsBtn">
                    <span class="settings-icon">⚙</span>
                    <span>Settings</span>
                </button>

                <div class="settings-dropdown" id="settingsDropdown">
                    <div class="settings-section">
                        <div class="settings-section-title">Theme</div>
                        <div class="theme-toggle-wrapper">
                            <span class="theme-toggle-label">Dark Mode</span>
                            <div class="theme-toggle" id="themeToggle">
                                <div class="theme-toggle-slider">☀️</div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <div class="settings-section-title">Font Size</div>
                        <div class="font-size-toggle">
                            <button class="font-size-btn" data-size="small">S</button>
                            <button class="font-size-btn active" data-size="medium">M</button>
                            <button class="font-size-btn" data-size="large">L</button>
                        </div>
                    </div>

                    <div class="settings-section">
                        <div class="settings-section-title">Financial Parameters</div>
                        <div class="settings-input-group">
                            <label class="settings-input-label">Fixed Exp Monthly Growth</label>
                            <input type="text" class="settings-input" value="$10" id="fixedExpGrowth">
                        </div>
                        <div class="settings-input-group">
                            <label class="settings-input-label">Loan Payment (M3)</label>
                            <input type="text" class="settings-input" value="$50" id="loanPayment">
                        </div>
                        <div class="settings-input-group">
                            <label class="settings-input-label">Beginning Cash</label>
                            <input type="text" class="settings-input" value="$50" id="beginningCash">
                        </div>
                        <div class="settings-input-group">
                            <label class="settings-input-label">Line of Credit (Current)</label>
                            <input type="text" class="settings-input" value="$20" id="lineOfCreditCurrent">
                        </div>
                    </div>

                    <div class="settings-section">
                        <div class="settings-section-title">Simulation Parameters</div>
                        <div class="settings-input-group">
                            <label class="settings-input-label">Max Trial Numbers</label>
                            <input type="number" class="settings-input" value="10000" id="maxTrialsInput" min="100" max="100000" step="100">
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Left Column -->
            <div class="left-column">
                <!-- Period & Engine Controls -->
                <div class="card controls-card">
                    <div class="controls-grid">
                        <div class="control-section">
                            <label class="control-section-label">Select Period</label>
                            <div class="select-wrapper">
                                <select id="periodSelect">
                                    <option value="1">Month 1</option>
                                    <option value="2">Month 2</option>
                                    <option value="3">Month 3</option>
                                    <option value="quarter" selected>Quarter</option>
                                </select>
                            </div>
                        </div>
                        <div class="control-section">
                            <label class="control-section-label">Calculation Engine</label>
                            <div class="engine-toggle">
                                <button class="engine-toggle-btn active" data-engine="submitted">Static</button>
                                <button class="engine-toggle-btn" data-engine="chanceplan">Stochastic</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CFO Levers & Gauge Combined -->
                <div class="card combined-card">
                    <div class="combined-content">
                        <div class="cfo-levers-section">
                            <div class="card-header card-header-collapsible" id="cfoLeversHeader">
                                <span class="card-title">CFO Levers</span>
                                <span class="expand-icon">+</span>
                            </div>
                            <div class="card-content" id="cfoLeversContent">
                                <div class="lever-row">
                                    <span class="lever-label">Cut OpEx</span>
                                    <input type="text" class="lever-input" value="$0" id="cutOpex">
                                </div>
                                <div class="lever-row">
                                    <span class="lever-label">Collect A/R</span>
                                    <input type="text" class="lever-input" value="$0" id="collectAR">
                                </div>
                                <div class="lever-row">
                                    <span class="lever-label">Increase LOC</span>
                                    <input type="text" class="lever-input" value="$0" id="increaseLOC">
                                </div>
                                <div class="loc-limit">
                                    <span class="loc-label">LOC Limit</span>
                                    <span class="loc-value" id="loc-limit-value">$20</span>
                                </div>
                            </div>
                        </div>

                        <div class="gauge-section-inline">
                            <div class="gauge-container">
                                <div class="gauge-wrapper">
                                    <svg class="gauge-svg" viewBox="0 0 120 120" width="100%" height="100%">
                                        <defs>
                                            <linearGradient id="gaugeGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                                <stop offset="0%" stop-color="#10b981"/>
                                                <stop offset="100%" stop-color="#10b981"/>
                                            </linearGradient>
                                        </defs>
                                        <circle class="gauge-bg" cx="60" cy="60" r="50"/>
                                        <circle class="gauge-fill" cx="60" cy="60" r="50"
                                                stroke-dasharray="314.16"
                                                stroke-dashoffset="28"
                                                id="gaugeFill"/>
                                    </svg>
                                    <div class="gauge-center">
                                        <img src="center-logo.png" alt="Center Logo">
                                    </div>
                                </div>
                                <div class="gauge-pointer-container">
                                    <div class="gauge-pointer gauge-pointer-left">
                                        <div class="gauge-pointer-value" id="gaugeValue">91.1%</div>
                                        <div class="gauge-pointer-label">Cash >= $0</div>
                                    </div>
                                    <div class="gauge-pointer gauge-pointer-right">
                                        <div class="gauge-pointer-value" id="riskValue">8.9%</div>
                                        <div class="gauge-pointer-label">Cash < $0</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card Selector for Mobile -->
                <div class="card-selector">
                    <div class="selector-toggle">
                        <button class="selector-toggle-btn active" data-card="chart">Chart</button>
                        <button class="selector-toggle-btn" data-card="submitted">Pro Forma</button>
                        <button class="selector-toggle-btn" data-card="simulated">Cash Flow</button>
                    </div>
                </div>

                <!-- Submitted Forecast Pro-Forma -->
                <div class="card card-submitted">
                    <div class="card-header">
                        <span class="card-title">Submitted Forecast Pro-Forma</span>
                    </div>
                    <div class="table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>Mo. 1</th>
                                    <th>Mo. 2</th>
                                    <th>Mo. 3</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Revenues</td>
                                    <td class="value-positive" id="submitted-revenues-mo1">$180</td>
                                    <td class="value-positive" id="submitted-revenues-mo2">$200</td>
                                    <td class="value-positive" id="submitted-revenues-mo3">$220</td>
                                </tr>
                                <tr>
                                    <td>OpEx</td>
                                    <td class="value-negative" id="submitted-opex-mo1">($168)</td>
                                    <td class="value-negative" id="submitted-opex-mo2">($180)</td>
                                    <td class="value-negative" id="submitted-opex-mo3">($192)</td>
                                </tr>
                                <tr>
                                    <td>Debt Pmt</td>
                                    <td class="value-neutral" id="submitted-debt-mo1">—</td>
                                    <td class="value-neutral" id="submitted-debt-mo2">—</td>
                                    <td class="value-negative" id="submitted-debt-mo3">($50)</td>
                                </tr>
                                <tr>
                                    <td>Cash Flow</td>
                                    <td class="value-positive" id="submitted-cashflow-mo1">$12</td>
                                    <td class="value-positive" id="submitted-cashflow-mo2">$20</td>
                                    <td class="value-negative" id="submitted-cashflow-mo3">($22)</td>
                                </tr>
                                <tr class="row-header">
                                    <td colspan="4" id="submitted-starting-cash">Starting Cash: $50</td>
                                </tr>
                                <tr>
                                    <td><strong>Cash</strong></td>
                                    <td id="submitted-cash-mo1">$62</td>
                                    <td id="submitted-cash-mo2">$82</td>
                                    <td id="submitted-cash-mo3">$60</td>
                                </tr>
                                <tr>
                                    <td>Line Draw</td>
                                    <td class="value-neutral" id="submitted-linedraw-mo1">$0</td>
                                    <td class="value-neutral" id="submitted-linedraw-mo2">$0</td>
                                    <td class="value-neutral" id="submitted-linedraw-mo3">$0</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Simulated Cash Flow Results -->
                <div class="card card-simulated">
                    <div class="card-header">
                        <span class="card-title">Cash Flow</span>
                    </div>
                    <div class="table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Average</th>
                                    <th>Mo. 1</th>
                                    <th>Mo. 2</th>
                                    <th>Mo. 3</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Cash</strong></td>
                                    <td id="simulated-cash-mo1">$62</td>
                                    <td id="simulated-cash-mo2">$82</td>
                                    <td id="simulated-cash-mo3">$62</td>
                                </tr>
                                <tr>
                                    <td>Line Draw</td>
                                    <td class="value-neutral" id="simulated-linedraw-mo1">$0</td>
                                    <td class="value-neutral" id="simulated-linedraw-mo2">$0</td>
                                    <td class="value-neutral" id="simulated-linedraw-mo3">$2</td>
                                </tr>
                                <tr>
                                    <td>Chance LOC Draw</td>
                                    <td class="value-neutral" id="simulated-chance-loc-mo1">1%</td>
                                    <td class="value-neutral" id="simulated-chance-loc-mo2">3%</td>
                                    <td class="value-warning" id="simulated-chance-loc-mo3">15%</td>
                                </tr>
                                <tr>
                                    <td>Chance Cash &lt; $0</td>
                                    <td class="value-neutral" id="simulated-chance-cash-mo1">0.3%</td>
                                    <td class="value-neutral" id="simulated-chance-cash-mo2">1.5%</td>
                                    <td class="value-warning" id="simulated-chance-cash-mo3">8.9%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="right-column">
                <!-- Chart -->
                <div class="card card-chart">
                    <div class="card-header">
                        <span class="card-title" id="chartTitle">Ending Cash Paths</span>
                        <div class="chart-controls">
                            <div class="control-group">
                                <span class="control-label">Starting Trial</span>
                                <div class="number-input">
                                    <input type="number" id="startTrial" value="33" min="1" max="10000">
                                    <div class="number-btn">
                                        <button onclick="adjustValue('startTrial', 1)">▲</button>
                                        <button onclick="adjustValue('startTrial', -1)">▼</button>
                                    </div>
                                </div>
                            </div>
                            <div class="control-group">
                                <span class="control-label">Number of Trial Paths</span>
                                <div class="number-input">
                                    <input type="number" id="numCurves" value="10" min="1">
                                    <div class="number-btn">
                                        <button onclick="adjustValue('numCurves', 1)">▲</button>
                                        <button onclick="adjustValue('numCurves', -1)">▼</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="cashPathsChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="cfo_phone_dashboard.js"></script>
</body>
</html>
